 AS V1.42 Beta [Bld 227] - Source File EMUZ80_ZTB.ASM - Page 1 - 11/29/2022 11:12:20


       1/       0 :                     	page	0
       2/       0 :                     	cpu	z80
       3/       0 :                     
       4/       0 :                     ;	PALO ALTO TINY BASIC
       5/       0 :                     ;	PORTABLE Z80 VERSION
       6/       0 :                     ;	TARGET: SBCZ80
       7/       0 :                     ;	ASSEMBLER: ARCPIT XZ80.EXE
       8/       0 :                     ;
       9/       0 :                     ;	MEMORY ASIGN
      10/       0 : =8000H               RAMTOP	EQU	08000H
      11/       0 : =4000H               RAMSIZ	EQU	4000H
      12/       0 : =0BD00H              VALTOP	EQU	RAMTOP + RAMSIZ - 300H		; BD00H
      13/       0 : =0BEC0H              TSTACK	EQU	RAMTOP + RAMSIZ - 140H		; BEC0H
      14/       0 :                     
      15/       0 : =4C00H               ZTBTOP	EQU	4C00H
      16/       0 :                     
      17/       0 :                     ;;
      18/       0 :                     ;	PALO ALTO TINY BASIC
      19/       0 :                     ;
      20/       0 : =0BD37H              LBUF	EQU	VALTOP+0037H
      21/       0 : =50H                 LBFSZ	EQU	80
      22/       0 : =0BD87H              MSTK	EQU	LBUF+LBFSZ
      23/       0 : =0BDA5H              TMSTK	EQU	MSTK+30
      24/       0 :                     ;
      25/       0 : ='>'                 PROMPT	EQU	'>'
      26/       0 : =7FH                 RUBOUT	EQU	7FH
      27/       0 : =8H                  BS	EQU	08H
      28/       0 : =1BH                 ESC	EQU	1BH
      29/       0 :                     ;
      30/       0 :                     MTST	MACRO	p1, p2
      31/       0 :                     	CALL	TEST
      32/       0 :                     	DB	p1
      33/       0 :                     	DB	p2-$-1
      34/       0 :                     	ENDM
      35/       0 :                     CASE_	MACRO	p1, p2
      36/       0 :                     	DB	p1
      37/       0 :                     	DB	(p2 >> 8)+80H
      38/       0 :                     	DB	p2 & 0FFH
      39/       0 :                     	ENDM
      40/       0 :                     MENDC	MACRO	p1
      41/       0 :                     	DB	(p1 + 8000H) >> 8
      42/       0 :                     	DB	p1 & 0FFH
      43/       0 :                     	ENDM
      44/       0 :                     ;
      45/       0 :                     
      46/    4C00 :                     	org	ZTBTOP
      47/    4C00 :                     
      48/    4C00 : =4C00H               ITOP	EQU	$
      49/    4C00 :                     
      50/    4C00 : C3 06 4C            	jp	ENTRY		;COLD START
      51/    4C03 : C3 27 4C            	jp	START		;WARM START
      52/    4C06 :                     
      53/    4C06 : 31 C0 BE            ENTRY:	LD	SP,TSTACK
      54/    4C09 : 21 14 80            	LD	HL,OTOP
      55/    4C0C : 22 00 80            	LD	(OBTM),HL
      56/    4C0F : CD B3 53            	CALL	CRLF
      57/    4C12 : 11 6C 53            	LD	DE,OPNMS1
      58/    4C15 : 97                  	SUB	A
      59/    4C16 : CD A5 53            	CALL	MSG
      60/    4C19 : 11 81 53            	LD	DE,OPNMS2
      61/    4C1C : 97                  	SUB	A
      62/    4C1D : CD A5 53            	CALL	MSG
      63/    4C20 : 11 96 53            	LD	DE,OPNMS3
      64/    4C23 : 97                  	SUB	A
      65/    4C24 : CD A5 53            	CALL	MSG
      66/    4C27 :                     ;
      67/    4C27 : 31 C0 BE            START:	LD	SP,TSTACK
      68/    4C2A : CD B3 53            	CALL	CRLF
      69/    4C2D : 11 58 53            	LD	DE,OKMES
      70/    4C30 : 97                  	SUB	A
      71/    4C31 : CD A5 53            	CALL	MSG
      72/    4C34 : 21 3B 4C            	LD	HL,$+7
      73/    4C37 : 22 02 80            	LD	(CLABL),HL
      74/    4C3A : 21 00 00            	LD	HL,0000H
      75/    4C3D : 22 08 80            	LD	(FCNTR),HL
      76/    4C40 : 22 04 80            	LD	(RSTCK),HL
      77/    4C43 :                     ;
      78/    4C43 : 3E 3E               EDITR:	LD	A,PROMPT
      79/    4C45 : CD A3 4C            	CALL	GETL
      80/    4C48 : D5                  	PUSH	DE
      81/    4C49 : 11 37 BD            	LD	DE,LBUF
      82/    4C4C : CD DA 52            	CALL	GINT
      83/    4C4F : CD 7F 4D            	CALL	SKPBL
      84/    4C52 : 7C                  	LD	A,H
      85/    4C53 : B5                  	OR	L
      86/    4C54 : C1                  	POP	BC
      87/    4C55 : CA 38 4D            	JP	Z,KWCPR
      88/    4C58 : 1B                  INSRT:	DEC	DE
      89/    4C59 : 7C                  	LD	A,H
      90/    4C5A : 12                  	LD	(DE),A
      91/    4C5B : 1B                  	DEC	DE
      92/    4C5C : 7D                  	LD	A,L
      93/    4C5D : 12                  	LD	(DE),A
      94/    4C5E : C5                  	PUSH	BC
      95/    4C5F : D5                  	PUSH	DE
      96/    4C60 : 79                  	LD	A,C
      97/    4C61 : 93                  	SUB	E
      98/    4C62 : F5                  	PUSH	AF
      99/    4C63 : CD F4 4C            	CALL	SRCH
     100/    4C66 : D5                  	PUSH	DE
     101/    4C67 : C2 7A 4C            	JP	NZ,MOVE
     102/    4C6A : D5                  	PUSH	DE
     103/    4C6B : CD 12 4D            	CALL	SKIPL
     104/    4C6E : C1                  	POP	BC
     105/    4C6F : 2A 00 80            	LD	HL,(OBTM)
     106/    4C72 : CD 1E 4D            	CALL	TRNSF
     107/    4C75 : 60                  	LD	H,B
     108/    4C76 : 69                  	LD	L,C
     109/    4C77 : 22 00 80            	LD	(OBTM),HL
     110/    4C7A : C1                  MOVE:	POP	BC
     111/    4C7B : 2A 00 80            	LD	HL,(OBTM)
     112/    4C7E : F1                  	POP	AF
     113/    4C7F : E5                  	PUSH	HL
     114/    4C80 : FE 03               	CP	03H
     115/    4C82 : CA 27 4C            	JP	Z,START
     116/    4C85 : 85                  	ADD	A,L
     117/    4C86 : 6F                  	LD	L,A
     118/    4C87 : 3E 00               	LD	A,00H
     119/    4C89 : 8C                  	ADC	A,H
     120/    4C8A : 67                  	LD	H,A
     121/    4C8B : 11 00 BD            	LD	DE,VALTOP
     122/    4C8E : CD 3B 52            	CALL	COMPR
     123/    4C91 : D2 29 53            	JP	NC,ERSRY
     124/    4C94 : 22 00 80            	LD	(OBTM),HL
     125/    4C97 : D1                  	POP	DE
     126/    4C98 : CD 29 4D            	CALL	TR2
     127/    4C9B : D1                  	POP	DE
     128/    4C9C : E1                  	POP	HL
     129/    4C9D : CD 1E 4D            	CALL	TRNSF
     130/    4CA0 : C3 43 4C            	JP	EDITR
     131/    4CA3 :                     ;
     132/    4CA3 : CD B5 53            GETL:	CALL	PUT
     133/    4CA6 : 11 37 BD            	LD	DE,LBUF
     134/    4CA9 : CD C1 53            GETL1:	CALL	GET
     135/    4CAC : CA A9 4C            	JP	Z,GETL1
     136/    4CAF : FE 0A               	CP	0AH
     137/    4CB1 : CA A9 4C            	JP	Z,GETL1
     138/    4CB4 : B7                  	OR	A
     139/    4CB5 : CA A9 4C            	JP	Z,GETL1
     140/    4CB8 : FE 08               	CP	BS
     141/    4CBA : CA D3 4C            	JP	Z,CRUB
     142/    4CBD : FE 18               	CP	'X'-'@'
     143/    4CBF : CA EC 4C            	JP	Z,CCAN
     144/    4CC2 : CD B5 53            	CALL	PUT
     145/    4CC5 :                     
     146/    4CC5 : CD CA 53            	call	GET1	; LOW to UPPER
     147/    4CC8 :                     
     148/    4CC8 : 12                  	LD	(DE),A
     149/    4CC9 : 13                  	INC	DE
     150/    4CCA : FE 0D               	CP	0DH
     151/    4CCC : C8                  	RET	Z
     152/    4CCD : 7B                  	LD	A,E
     153/    4CCE : FE 87               	CP	LBUFL + LBFSZ
     154/    4CD0 : C2 A9 4C            	JP	NZ,GETL1
     155/    4CD3 : 7B                  CRUB:	LD	A,E
     156/    4CD4 : FE 37               	CP	LBUFL
     157/    4CD6 : CA A9 4C            	JP	Z,GETL1
     158/    4CD9 : 1B                  	DEC	DE
     159/    4CDA : 3E 08               	LD	A,BS
     160/    4CDC : CD B5 53            	CALL	PUT
     161/    4CDF :                     
     162/    4CDF : 3E 20               	LD	A,' '
     163/    4CE1 : CD B5 53            	CALL	PUT
     164/    4CE4 : 3E 08               	LD	A,BS
     165/    4CE6 : CD B5 53            	CALL	PUT
     166/    4CE9 :                     
     167/    4CE9 : C3 A9 4C            	JP	GETL1
     168/    4CEC : CD B3 53            CCAN:	CALL	CRLF
     169/    4CEF : 3E 40               	LD	A,'@'
     170/    4CF1 : C3 A3 4C            	JP	GETL
     171/    4CF4 : =37H                 LBUFL	EQU	LBUF & 0FFH
     172/    4CF4 :                     ;
     173/    4CF4 : 7C                  SRCH:	LD	A,H
     174/    4CF5 : B7                  	OR	A
     175/    4CF6 : FA 22 53            	JP	M,ERHOW
     176/    4CF9 : 11 14 80            	LD	DE,OTOP
     177/    4CFC : E5                  SRCH1:	PUSH	HL
     178/    4CFD : 2A 00 80            	LD	HL,(OBTM)
     179/    4D00 : 2B                  	DEC	HL
     180/    4D01 : CD 3B 52            	CALL	COMPR
     181/    4D04 : E1                  	POP	HL
     182/    4D05 : D8                  	RET	C
     183/    4D06 : 1A                  	LD	A,(DE)
     184/    4D07 : 95                  	SUB	L
     185/    4D08 : 47                  	LD	B,A
     186/    4D09 : 13                  	INC	DE
     187/    4D0A : 1A                  	LD	A,(DE)
     188/    4D0B : 9C                  	SBC	A,H
     189/    4D0C : DA 13 4D            	JP	C,SKPL1
     190/    4D0F : 1B                  	DEC	DE
     191/    4D10 : B0                  	OR	B
     192/    4D11 : C9                  	RET
     193/    4D12 :                     ;
     194/    4D12 : 13                  SKIPL:	INC	DE
     195/    4D13 : 13                  SKPL1:	INC	DE
     196/    4D14 : 1A                  SKPL2:	LD	A,(DE)
     197/    4D15 : FE 0D               	CP	0DH
     198/    4D17 : C2 13 4D            	JP	NZ,SKPL1
     199/    4D1A : 13                  	INC	DE
     200/    4D1B : C3 FC 4C            	JP	SRCH1
     201/    4D1E :                     ;
     202/    4D1E : CD 3B 52            TRNSF:	CALL	COMPR
     203/    4D21 : C8                  	RET	Z
     204/    4D22 : 1A                  	LD	A,(DE)
     205/    4D23 : 02                  	LD	(BC),A
     206/    4D24 : 13                  	INC	DE
     207/    4D25 : 03                  	INC	BC
     208/    4D26 : C3 1E 4D            	JP	TRNSF
     209/    4D29 :                     ;
     210/    4D29 : 78                  TR2:	LD	A,B
     211/    4D2A : 92                  	SUB	D
     212/    4D2B : C2 31 4D            	JP	NZ,TR2E
     213/    4D2E : 79                  	LD	A,C
     214/    4D2F : 93                  	SUB	E
     215/    4D30 : C8                  	RET	Z
     216/    4D31 : 1B                  TR2E:	DEC	DE
     217/    4D32 : 2B                  	DEC	HL
     218/    4D33 : 1A                  	LD	A,(DE)
     219/    4D34 : 77                  	LD	(HL),A
     220/    4D35 : C3 29 4D            	JP	TR2
     221/    4D38 :                     ;
     222/    4D38 : 21 86 4D            KWCPR:	LD	HL,CMDKW-1
     223/    4D3B :                     ;
     224/    4D3B : CD 7F 4D            NXTKW:	CALL	SKPBL
     225/    4D3E : D5                  NXTK1:	PUSH	DE
     226/    4D3F : 1A                  KWC1:	LD	A,(DE)
     227/    4D40 : 13                  	INC	DE
     228/    4D41 : FE 2E               	CP	'.'
     229/    4D43 : CA 5C 4D            	JP	Z,KWSRT
     230/    4D46 : 23                  	INC	HL
     231/    4D47 : BE                  	CP	(HL)
     232/    4D48 : CA 3F 4D            	JP	Z,KWC1
     233/    4D4B : 3E 7F               	LD	A,7FH
     234/    4D4D : 1B                  	DEC	DE
     235/    4D4E : BE                  	CP	(HL)
     236/    4D4F : DA 63 4D            	JP	C,EXEQT
     237/    4D52 : 23                  KWSK1:	INC	HL
     238/    4D53 : BE                  	CP	(HL)
     239/    4D54 : D2 52 4D            	JP	NC,KWSK1
     240/    4D57 : 23                  	INC	HL
     241/    4D58 : D1                  	POP	DE
     242/    4D59 : C3 3E 4D            	JP	NXTK1
     243/    4D5C :                     ;
     244/    4D5C : 3E 7F               KWSRT:	LD	A,7FH
     245/    4D5E : 23                  KWSK2:	INC	HL
     246/    4D5F : BE                  	CP	(HL)
     247/    4D60 : D2 5E 4D            	JP	NC,KWSK2
     248/    4D63 :                     ;
     249/    4D63 : 7E                  EXEQT:	LD	A,(HL)
     250/    4D64 : 23                  	INC	HL
     251/    4D65 : 6E                  	LD	L,(HL)
     252/    4D66 : E6 7F               	AND	7FH
     253/    4D68 : 67                  	LD	H,A
     254/    4D69 : F1                  	POP	AF
     255/    4D6A : E9                  	JP	(HL)
     256/    4D6B :                     ;
     257/    4D6B : E3                  TEST:	EX	(SP),HL
     258/    4D6C : CD 7F 4D            	CALL	SKPBL
     259/    4D6F : BE                  	CP	(HL)
     260/    4D70 : 23                  	INC	HL
     261/    4D71 : CA 7B 4D            	JP	Z,TSTEQ
     262/    4D74 : C5                  	PUSH	BC
     263/    4D75 : 4E                  	LD	C,(HL)
     264/    4D76 : 06 00               	LD	B,00H
     265/    4D78 : 09                  	ADD	HL,BC
     266/    4D79 : C1                  	POP	BC
     267/    4D7A : 1B                  	DEC	DE
     268/    4D7B : 13                  TSTEQ:	INC	DE
     269/    4D7C : 23                  	INC	HL
     270/    4D7D : E3                  	EX	(SP),HL
     271/    4D7E : C9                  	RET
     272/    4D7F :                     ;
     273/    4D7F : 1A                  SKPBL:	LD	A,(DE)
     274/    4D80 : FE 20               	CP	' '
     275/    4D82 : C0                  	RET	NZ
     276/    4D83 : 13                  	INC	DE
     277/    4D84 : C3 7F 4D            	JP	SKPBL
     278/    4D87 :                     ;
     279/    4D87 : (MACRO)              CMDKW:	CASE_	"LIST", LIST
     279/    4D87 : 4C 49 53 54                 DB      "LIST"
     279/    4D8B : CF                          DB      (LIST >> 8)+80H
     279/    4D8C : 50                          DB      LIST & 0FFH
     280/    4D8D : (MACRO)              	CASE_	"RUN", RUN
     280/    4D8D : 52 55 4E                    DB      "RUN"
     280/    4D90 : D0                          DB      (RUN >> 8)+80H
     280/    4D91 : CD                          DB      RUN & 0FFH
     281/    4D92 : (MACRO)              	CASE_	"NEW", NEW
     281/    4D92 : 4E 45 57                    DB      "NEW"
     281/    4D95 : CD                          DB      (NEW >> 8)+80H
     281/    4D96 : E3                          DB      NEW & 0FFH
     282/    4D97 : (MACRO)              	CASE_	"BYE", BYE
     282/    4D97 : 42 59 45                    DB      "BYE"
     282/    4D9A : CD                          DB      (BYE >> 8)+80H
     282/    4D9B : E0                          DB      BYE & 0FFH
     283/    4D9C : (MACRO)              STMKW:	CASE_	"NEXT", NEXT
     283/    4D9C : 4E 45 58 54                 DB      "NEXT"
     283/    4DA0 : CE                          DB      (NEXT >> 8)+80H
     283/    4DA1 : A2                          DB      NEXT & 0FFH
     284/    4DA2 : (MACRO)              	CASE_	"LET", LET
     284/    4DA2 : 4C 45 54                    DB      "LET"
     284/    4DA5 : D0                          DB      (LET >> 8)+80H
     284/    4DA6 : 9B                          DB      LET & 0FFH
     285/    4DA7 : (MACRO)              	CASE_	"INPUT", INPUT
     285/    4DA7 : 49 4E 50 55 54              DB      "INPUT"
     285/    4DAC : D0                          DB      (INPUT >> 8)+80H
     285/    4DAD : 3F                          DB      INPUT & 0FFH
     286/    4DAE : (MACRO)              	CASE_	"IF", IFSTM
     286/    4DAE : 49 46                       DB      "IF"
     286/    4DB0 : CF                          DB      (IFSTM >> 8)+80H
     286/    4DB1 : 3C                          DB      IFSTM & 0FFH
     287/    4DB2 : (MACRO)              	CASE_	"GOTO", GOTO
     287/    4DB2 : 47 4F 54 4F                 DB      "GOTO"
     287/    4DB6 : D0                          DB      (GOTO >> 8)+80H
     287/    4DB7 : BC                          DB      GOTO & 0FFH
     288/    4DB8 : (MACRO)              	CASE_	"GOSUB", GOSUB
     288/    4DB8 : 47 4F 53 55 42              DB      "GOSUB"
     288/    4DBD : CD                          DB      (GOSUB >> 8)+80H
     288/    4DBE : F2                          DB      GOSUB & 0FFH
     289/    4DBF : (MACRO)              	CASE_	"RETURN", RETRN
     289/    4DBF : 52 45 54 55 52 4E           DB      "RETURN"
     289/    4DC5 : CE                          DB      (RETRN >> 8)+80H
     289/    4DC6 : 14                          DB      RETRN & 0FFH
     290/    4DC7 : (MACRO)              	CASE_	"REM", REM
     290/    4DC7 : 52 45 4D                    DB      "REM"
     290/    4DCA : CF                          DB      (REM >> 8)+80H
     290/    4DCB : 44                          DB      REM & 0FFH
     291/    4DCC : (MACRO)              	CASE_	"FOR", FOR
     291/    4DCC : 46 4F 52                    DB      "FOR"
     291/    4DCF : CE                          DB      (FOR >> 8)+80H
     291/    4DD0 : 2F                          DB      FOR & 0FFH
     292/    4DD1 : (MACRO)              	CASE_	"PRINT", PRINT
     292/    4DD1 : 50 52 49 4E 54              DB      "PRINT"
     292/    4DD6 : CF                          DB      (PRINT >> 8)+80H
     292/    4DD7 : 7D                          DB      PRINT & 0FFH
     293/    4DD8 : (MACRO)              	CASE_	"STOP", STOP
     293/    4DD8 : 53 54 4F 50                 DB      "STOP"
     293/    4DDC : CD                          DB      (STOP >> 8)+80H
     293/    4DDD : EC                          DB      STOP & 0FFH
     294/    4DDE : (MACRO)              	MENDC	LETDF
     294/    4DDE : D0                          DB      (LETDF + 8000H) >> 8
     294/    4DDF : 93                          DB      LETDF & 0FFH
     295/    4DE0 :                     ;
     296/    4DE0 : 0E 01               BYE:	ld	c, 1
     297/    4DE2 : F7                  	rst	30H		; return to EMUZ80-MON
     298/    4DE3 :                     	
     299/    4DE3 : CD 05 51            NEW:	CALL	TSCR2
     300/    4DE6 : 21 14 80            	LD	HL,OTOP
     301/    4DE9 : 22 00 80            	LD	(OBTM),HL
     302/    4DEC : CD 05 51            STOP:	CALL	TSCR2
     303/    4DEF : C3 27 4C            	JP	START
     304/    4DF2 :                     ;
     305/    4DF2 : CD F7 4E            GOSUB:	CALL	PSHV
     306/    4DF5 : CD 0E 51            	CALL	EEXPR
     307/    4DF8 : D5                  	PUSH	DE
     308/    4DF9 : CD F4 4C            	CALL	SRCH
     309/    4DFC : C2 23 53            	JP	NZ,ERHW1
     310/    4DFF : 2A 02 80            	LD	HL,(CLABL)
     311/    4E02 : E5                  	PUSH	HL
     312/    4E03 : 2A 04 80            	LD	HL,(RSTCK)
     313/    4E06 : E5                  	PUSH	HL
     314/    4E07 : 21 00 00            	LD	HL,0000H
     315/    4E0A : 22 08 80            	LD	(FCNTR),HL
     316/    4E0D : 39                  	ADD	HL,SP
     317/    4E0E : 22 04 80            	LD	(RSTCK),HL
     318/    4E11 : C3 DC 50            	JP	RUN2
     319/    4E14 :                     
     320/    4E14 : CD 05 51            RETRN:	CALL	TSCR2
     321/    4E17 : 2A 04 80            	LD	HL,(RSTCK)
     322/    4E1A : 7C                  	LD	A,H
     323/    4E1B : B5                  	OR	L
     324/    4E1C : CA 1B 53            	JP	Z,ERWHT
     325/    4E1F : F9                  	LD	SP,HL
     326/    4E20 : E1                  	POP	HL
     327/    4E21 : 22 04 80            	LD	(RSTCK),HL
     328/    4E24 : E1                  	POP	HL
     329/    4E25 : 22 02 80            	LD	(CLABL),HL
     330/    4E28 : D1                  	POP	DE
     331/    4E29 : CD 20 4F            	CALL	POPV
     332/    4E2C : C3 EC 50            	JP	ENDL
     333/    4E2F :                     ;
     334/    4E2F : CD F7 4E            FOR:	CALL	PSHV
     335/    4E32 : CD A6 50            	CALL	LTSUB
     336/    4E35 : 2B                  	DEC	HL
     337/    4E36 : 22 08 80            	LD	(FCNTR),HL
     338/    4E39 : 21 3E 4E            	LD	HL,KWTO-1
     339/    4E3C : C3 3B 4D            	JP	NXTKW
     340/    4E3F : (MACRO)              KWTO:	CASE_	"TO", FORTO
     340/    4E3F : 54 4F                       DB      "TO"
     340/    4E41 : CE                          DB      (FORTO >> 8)+80H
     340/    4E42 : 45                          DB      FORTO & 0FFH
     341/    4E43 : (MACRO)              	MENDC	ERWHT
     341/    4E43 : D3                          DB      (ERWHT + 8000H) >> 8
     341/    4E44 : 1B                          DB      ERWHT & 0FFH
     342/    4E45 :                     ;
     343/    4E45 : CD 0E 51            FORTO:	CALL	EEXPR
     344/    4E48 : 22 0C 80            	LD	(FTOV),HL
     345/    4E4B : 21 50 4E            	LD	HL,KWSTP-1
     346/    4E4E : C3 3B 4D            	JP	NXTKW
     347/    4E51 : (MACRO)              KWSTP:	CASE_	"STEP" ,FSTEP
     347/    4E51 : 53 54 45 50                 DB      "STEP"
     347/    4E55 : CE                          DB      (FSTEP >> 8)+80H
     347/    4E56 : 59                          DB      FSTEP & 0FFH
     348/    4E57 : (MACRO)              	MENDC	FSTP1
     348/    4E57 : CE                          DB      (FSTP1 + 8000H) >> 8
     348/    4E58 : 5F                          DB      FSTP1 & 0FFH
     349/    4E59 :                     ;
     350/    4E59 : CD 0E 51            FSTEP:	CALL	EEXPR
     351/    4E5C : C3 62 4E            	JP	FOR0
     352/    4E5F : 21 01 00            FSTP1:	LD	HL,0001H
     353/    4E62 : 22 0A 80            FOR0:	LD	(FSTPV),HL
     354/    4E65 : 2A 02 80            	LD	HL,(CLABL)
     355/    4E68 : 22 0E 80            	LD	(FLABL),HL
     356/    4E6B : EB                  	EX	DE,HL
     357/    4E6C : 22 10 80            	LD	(FOBJ),HL
     358/    4E6F : 01 0A 00            	LD	BC,000AH
     359/    4E72 : 2A 08 80            	LD	HL,(FCNTR)
     360/    4E75 : EB                  	EX	DE,HL
     361/    4E76 : 60                  	LD	H,B
     362/    4E77 : 68                  	LD	L,B
     363/    4E78 : 39                  	ADD	HL,SP
     364/    4E79 : 3E                  	DB	3EH
     365/    4E7A : 09                  FOR3:	ADD	HL,BC
     366/    4E7B : 7E                  	LD	A,(HL)
     367/    4E7C : 23                  	INC	HL
     368/    4E7D : B6                  	OR	(HL)
     369/    4E7E : CA 9B 4E            	JP	Z,FOR10
     370/    4E81 : 7E                  	LD	A,(HL)
     371/    4E82 : 2B                  	DEC	HL
     372/    4E83 : BA                  	CP	D
     373/    4E84 : C2 7A 4E            	JP	NZ,FOR3
     374/    4E87 : 7E                  	LD	A,(HL)
     375/    4E88 : BB                  	CP	E
     376/    4E89 : C2 7A 4E            	JP	NZ,FOR3
     377/    4E8C : EB                  FOR5:	EX	DE,HL
     378/    4E8D : 21 00 00            	LD	HL,0000H
     379/    4E90 : 39                  	ADD	HL,SP
     380/    4E91 : 44                  	LD	B,H
     381/    4E92 : 4D                  	LD	C,L
     382/    4E93 : 21 0A 00            	LD	HL,000AH
     383/    4E96 : 19                  	ADD	HL,DE
     384/    4E97 : CD 29 4D            	CALL	TR2
     385/    4E9A : F9                  	LD	SP,HL
     386/    4E9B : 2A 10 80            FOR10:	LD	HL,(FOBJ)
     387/    4E9E : EB                  	EX	DE,HL
     388/    4E9F : C3 EC 50            	JP	ENDL
     389/    4EA2 :                     ;
     390/    4EA2 : CD A6 52            NEXT:	CALL	TSTV
     391/    4EA5 : DA 1B 53            	JP	C,ERWHT
     392/    4EA8 : 22 06 80            	LD	(NCNTR),HL
     393/    4EAB : D5                  NEXT1:	PUSH	DE
     394/    4EAC : EB                  	EX	DE,HL
     395/    4EAD : 2A 08 80            	LD	HL,(FCNTR)
     396/    4EB0 : 7C                  	LD	A,H
     397/    4EB1 : B5                  	OR	L
     398/    4EB2 : CA 1C 53            	JP	Z,ERWT1
     399/    4EB5 : CD 3B 52            	CALL	COMPR
     400/    4EB8 : CA C5 4E            	JP	Z,NEXT2
     401/    4EBB : D1                  	POP	DE
     402/    4EBC : CD 20 4F            	CALL	POPV
     403/    4EBF : 2A 06 80            	LD	HL,(NCNTR)
     404/    4EC2 : C3 AB 4E            	JP	NEXT1
     405/    4EC5 : 5E                  NEXT2:	LD	E,(HL)
     406/    4EC6 : 23                  	INC	HL
     407/    4EC7 : 56                  	LD	D,(HL)
     408/    4EC8 : 2A 0A 80            	LD	HL,(FSTPV)
     409/    4ECB : E5                  	PUSH	HL
     410/    4ECC : 19                  	ADD	HL,DE
     411/    4ECD : EB                  	EX	DE,HL
     412/    4ECE : 2A 08 80            	LD	HL,(FCNTR)
     413/    4ED1 : 73                  	LD	(HL),E
     414/    4ED2 : 23                  	INC	HL
     415/    4ED3 : 72                  	LD	(HL),D
     416/    4ED4 : 2A 0C 80            	LD	HL,(FTOV)
     417/    4ED7 : F1                  	POP	AF
     418/    4ED8 : B7                  	OR	A
     419/    4ED9 : F2 DD 4E            	JP	P,NEXT4
     420/    4EDC : EB                  	EX	DE,HL
     421/    4EDD : CD 35 52            NEXT4:	CALL	CMINT
     422/    4EE0 : D1                  	POP	DE
     423/    4EE1 : DA F1 4E            	JP	C,NEXT5
     424/    4EE4 : 2A 0E 80            	LD	HL,(FLABL)
     425/    4EE7 : 22 02 80            	LD	(CLABL),HL
     426/    4EEA : 2A 10 80            	LD	HL,(FOBJ)
     427/    4EED : EB                  	EX	DE,HL
     428/    4EEE : C3 EC 50            	JP	ENDL
     429/    4EF1 : CD 20 4F            NEXT5:	CALL	POPV
     430/    4EF4 : C3 EC 50            	JP	ENDL
     431/    4EF7 :                     ;
     432/    4EF7 : 21 A5 BD            PSHV:	LD	HL,TMSTK
     433/    4EFA : CD 29 52            	CALL	TWSCP
     434/    4EFD : C1                  	POP	BC
     435/    4EFE : 39                  	ADD	HL,SP
     436/    4EFF : D2 29 53            	JP	NC,ERSRY
     437/    4F02 : 2A 08 80            	LD	HL,(FCNTR)
     438/    4F05 : 7C                  	LD	A,H
     439/    4F06 : B5                  	OR	L
     440/    4F07 : CA 1D 4F            	JP	Z,NPSH
     441/    4F0A : 2A 10 80            	LD	HL,(FOBJ)
     442/    4F0D : E5                  	PUSH	HL
     443/    4F0E : 2A 0E 80            	LD	HL,(FLABL)
     444/    4F11 : E5                  	PUSH	HL
     445/    4F12 : 2A 0C 80            	LD	HL,(FTOV)
     446/    4F15 : E5                  	PUSH	HL
     447/    4F16 : 2A 0A 80            	LD	HL,(FSTPV)
     448/    4F19 : E5                  	PUSH	HL
     449/    4F1A : 2A 08 80            	LD	HL,(FCNTR)
     450/    4F1D : E5                  NPSH:	PUSH	HL
     451/    4F1E : C5                  	PUSH	BC
     452/    4F1F : C9                  	RET
     453/    4F20 :                     ;
     454/    4F20 : C1                  POPV:	POP	BC
     455/    4F21 : E1                  	POP	HL
     456/    4F22 : 22 08 80            	LD	(FCNTR),HL
     457/    4F25 : 7C                  	LD	A,H
     458/    4F26 : B5                  	OR	L
     459/    4F27 : CA 3A 4F            	JP	Z,NPOP
     460/    4F2A : E1                  	POP	HL
     461/    4F2B : 22 0A 80            	LD	(FSTPV),HL
     462/    4F2E : E1                  	POP	HL
     463/    4F2F : 22 0C 80            	LD	(FTOV),HL
     464/    4F32 : E1                  	POP	HL
     465/    4F33 : 22 0E 80            	LD	(FLABL),HL
     466/    4F36 : E1                  	POP	HL
     467/    4F37 : 22 10 80            	LD	(FOBJ),HL
     468/    4F3A : C5                  NPOP:	PUSH	BC
     469/    4F3B : C9                  	RET
     470/    4F3C :                     ;
     471/    4F3C : CD 0E 51            IFSTM:	CALL	EEXPR
     472/    4F3F : 7C                  	LD	A,H
     473/    4F40 : B5                  	OR	L
     474/    4F41 : C2 E3 50            	JP	NZ,NXTGO
     475/    4F44 : 21 00 00            REM:	LD	HL,0000H
     476/    4F47 : CD 14 4D            	CALL	SKPL2
     477/    4F4A : D2 DC 50            	JP	NC,RUN2
     478/    4F4D : C3 27 4C            	JP	START
     479/    4F50 :                     ;
     480/    4F50 : CD DA 52            LIST:	CALL	GINT
     481/    4F53 : CD 05 51            	CALL	TSCR2
     482/    4F56 : CD F4 4C            	CALL	SRCH
     483/    4F59 : DA 27 4C            LISTL:	JP	C,START
     484/    4F5C : CD 68 4F            	CALL	WLINE
     485/    4F5F : CD C1 53            	CALL	BREAK
     486/    4F62 : CD FC 4C            	CALL	SRCH1
     487/    4F65 : C3 59 4F            	JP	LISTL
     488/    4F68 :                     ;
     489/    4F68 : 1A                  WLINE:	LD	A,(DE)
     490/    4F69 : 6F                  	LD	L,A
     491/    4F6A : 13                  	INC	DE
     492/    4F6B : 1A                  	LD	A,(DE)
     493/    4F6C : 67                  	LD	H,A
     494/    4F6D : 13                  	INC	DE
     495/    4F6E : 0E 04               	LD	C,04H
     496/    4F70 : CD F3 4F            	CALL	WINT
     497/    4F73 : 3E 20               	LD	A,' '
     498/    4F75 : CD B5 53            	CALL	PUT
     499/    4F78 : 97                  	SUB	A
     500/    4F79 : CD A5 53            	CALL	MSG
     501/    4F7C : C9                  	RET
     502/    4F7D :                     ;
     503/    4F7D : 0E 06               PRINT:	LD	C,6
     504/    4F7F : (MACRO)              PRSC:	MTST	3BH,PRCR
     504/    4F7F : CD 6B 4D                    CALL    TEST
     504/    4F82 : 3B                          DB      3BH
     504/    4F83 : 06                          DB      PRCR-$-1
     505/    4F84 : CD B3 53            	CALL	CRLF
     506/    4F87 : C3 E3 50            	JP	NXTGO
     507/    4F8A : (MACRO)              PRCR:	MTST	0DH,PRSHA
     507/    4F8A : CD 6B 4D                    CALL    TEST
     507/    4F8D : 0D                          DB      0DH
     507/    4F8E : 06                          DB      PRSHA-$-1
     508/    4F8F : CD B3 53            	CALL	CRLF
     509/    4F92 : C3 D3 50            	JP	RUN1
     510/    4F95 : (MACRO)              PRSHA:	MTST	23H,PRLTR
     510/    4F95 : CD 6B 4D                    CALL    TEST
     510/    4F98 : 23                          DB      23H
     510/    4F99 : 07                          DB      PRLTR-$-1
     511/    4F9A : CD 0E 51            	CALL	EEXPR
     512/    4F9D : 4D                  	LD	C,L
     513/    4F9E : C3 A7 4F            	JP	PRCMA
     514/    4FA1 : CD C3 4F            PRLTR:	CALL	PRSUB
     515/    4FA4 : C3 B8 4F            	JP	PREXP
     516/    4FA7 : (MACRO)              PRCMA:	MTST	2CH,PREND
     516/    4FA7 : CD 6B 4D                    CALL    TEST
     516/    4FAA : 2C                          DB      2CH
     516/    4FAB : 06                          DB      PREND-$-1
     517/    4FAC : CD F2 50            	CALL	TSTSC
     518/    4FAF : C3 95 4F            	JP	PRSHA
     519/    4FB2 : CD B3 53            PREND:	CALL	CRLF
     520/    4FB5 : C3 EC 50            	JP	ENDL
     521/    4FB8 : CD 0E 51            PREXP:	CALL	EEXPR
     522/    4FBB : C5                  	PUSH	BC
     523/    4FBC : CD F3 4F            	CALL	WINT
     524/    4FBF : C1                  	POP	BC
     525/    4FC0 : C3 A7 4F            	JP	PRCMA
     526/    4FC3 :                     ;
     527/    4FC3 : (MACRO)              PRSUB:	MTST	22H,PR13
     527/    4FC3 : CD 6B 4D                    CALL    TEST
     527/    4FC6 : 22                          DB      22H
     527/    4FC7 : 05                          DB      PR13-$-1
     528/    4FC8 : 3E 22               	LD	A,22H
     529/    4FCA : C3 D4 4F            	JP	PR11
     530/    4FCD : (MACRO)              PR13:	MTST	27H,PR14
     530/    4FCD : CD 6B 4D                    CALL    TEST
     530/    4FD0 : 27                          DB      27H
     530/    4FD1 : 0E                          DB      PR14-$-1
     531/    4FD2 : 3E 27               	LD	A,27H
     532/    4FD4 : CD A5 53            PR11:	CALL	MSG
     533/    4FD7 : FE 0D               	CP	0DH
     534/    4FD9 : E1                  	POP	HL
     535/    4FDA : CA D3 50            	JP	Z,RUN1
     536/    4FDD : C3 EE 4F            	JP	PR12
     537/    4FE0 : (MACRO)              PR14:	MTST	5FH,PR15
     537/    4FE0 : CD 6B 4D                    CALL    TEST
     537/    4FE3 : 5F                          DB      5FH
     537/    4FE4 : 0D                          DB      PR15-$-1
     538/    4FE5 : 3E 8D               	LD	A,80H+0DH
     539/    4FE7 : CD B5 53            	CALL	PUT
     540/    4FEA : CD B5 53            	CALL	PUT
     541/    4FED : E1                  	POP	HL
     542/    4FEE : 23                  PR12:	INC	HL
     543/    4FEF : 23                  	INC	HL
     544/    4FF0 : 23                  	INC	HL
     545/    4FF1 : E9                  	JP	(HL)
     546/    4FF2 : C9                  PR15:	RET
     547/    4FF3 :                     ;
     548/    4FF3 : D5                  WINT:	PUSH	DE
     549/    4FF4 : 11 0A 00            	LD	DE,000AH
     550/    4FF7 : D5                  	PUSH	DE
     551/    4FF8 : 42                  	LD	B,D
     552/    4FF9 : 0D                  	DEC	C
     553/    4FFA : CD 26 52            	CALL	ABS
     554/    4FFD : F2 03 50            	JP	P,WINT1
     555/    5000 : 06 2D               	LD	B,'-'
     556/    5002 : 0D                  	DEC	C
     557/    5003 : C5                  WINT1:	PUSH	BC
     558/    5004 : CD 09 52            WINT2:	CALL	DIVID
     559/    5007 : 78                  	LD	A,B
     560/    5008 : B1                  	OR	C
     561/    5009 : CA 14 50            	JP	Z,WINT3
     562/    500C : E3                  	EX	(SP),HL
     563/    500D : 2D                  	DEC	L
     564/    500E : E5                  	PUSH	HL
     565/    500F : 60                  	LD	H,B
     566/    5010 : 69                  	LD	L,C
     567/    5011 : C3 04 50            	JP	WINT2
     568/    5014 : C1                  WINT3:	POP	BC
     569/    5015 : 0D                  WINT4:	DEC	C
     570/    5016 : 79                  	LD	A,C
     571/    5017 : B7                  	OR	A
     572/    5018 : FA 23 50            	JP	M,WINT5
     573/    501B : 3E 20               	LD	A,' '
     574/    501D : CD B5 53            	CALL	PUT
     575/    5020 : C3 15 50            	JP	WINT4
     576/    5023 : 78                  WINT5:	LD	A,B
     577/    5024 : CD B5 53            	CALL	PUT
     578/    5027 : 5D                  	LD	E,L
     579/    5028 : 7B                  WINT6:	LD	A,E
     580/    5029 : FE 0A               	CP	0AH
     581/    502B : D1                  	POP	DE
     582/    502C : C8                  	RET	Z
     583/    502D : C6 30               	ADD	A,30H
     584/    502F : CD B5 53            	CALL	PUT
     585/    5032 : C3 28 50            	JP	WINT6
     586/    5035 :                     ;
     587/    5035 : 2A 06 80            ERRIN:	LD	HL,(NCNTR)
     588/    5038 : F9                  	LD	SP,HL
     589/    5039 : E1                  	POP	HL
     590/    503A : 22 02 80            	LD	(CLABL),HL
     591/    503D : D1                  	POP	DE
     592/    503E : D1                  	POP	DE
     593/    503F : D5                  INPUT:	PUSH	DE
     594/    5040 : CD C3 4F            	CALL	PRSUB
     595/    5043 : C3 4F 50            	JP	INPT2
     596/    5046 : CD A6 52            INPT1:	CALL	TSTV
     597/    5049 : DA 8A 50            	JP	C,INPT6
     598/    504C : C3 61 50            	JP	INPT4
     599/    504F : D5                  INPT2:	PUSH	DE
     600/    5050 : CD A6 52            	CALL	TSTV
     601/    5053 : DA 1B 53            	JP	C,ERWHT
     602/    5056 : 1A                  	LD	A,(DE)
     603/    5057 : 4F                  	LD	C,A
     604/    5058 : 97                  	SUB	A
     605/    5059 : 12                  	LD	(DE),A
     606/    505A : D1                  	POP	DE
     607/    505B : CD A5 53            	CALL	MSG
     608/    505E : 79                  	LD	A,C
     609/    505F : 1B                  	DEC	DE
     610/    5060 : 12                  	LD	(DE),A
     611/    5061 : D5                  INPT4:	PUSH	DE
     612/    5062 : EB                  	EX	DE,HL
     613/    5063 : 2A 02 80            	LD	HL,(CLABL)
     614/    5066 : E5                  	PUSH	HL
     615/    5067 : 21 3F 50            	LD	HL,INPUT
     616/    506A : 22 02 80            	LD	(CLABL),HL
     617/    506D : 21 00 00            	LD	HL,0000H
     618/    5070 : 39                  	ADD	HL,SP
     619/    5071 : 22 06 80            	LD	(NCNTR),HL
     620/    5074 : D5                  	PUSH	DE
     621/    5075 : 3E 3A               	LD	A,':'
     622/    5077 : CD A3 4C            	CALL	GETL
     623/    507A : 11 37 BD            	LD	DE,LBUF
     624/    507D : CD 0E 51            	CALL	EEXPR
     625/    5080 : D1                  	POP	DE
     626/    5081 : EB                  	EX	DE,HL
     627/    5082 : 73                  	LD	(HL),E
     628/    5083 : 23                  	INC	HL
     629/    5084 : 72                  	LD	(HL),D
     630/    5085 : E1                  	POP	HL
     631/    5086 : 22 02 80            	LD	(CLABL),HL
     632/    5089 : D1                  	POP	DE
     633/    508A : F1                  INPT6:	POP	AF
     634/    508B : (MACRO)              	MTST	2CH,ENDL
     634/    508B : CD 6B 4D                    CALL    TEST
     634/    508E : 2C                          DB      2CH
     634/    508F : 5C                          DB      ENDL-$-1
     635/    5090 : C3 3F 50            	JP	INPUT
     636/    5093 :                     ;
     637/    5093 : CD FB 50            LETDF:	CALL	TSCR1
     638/    5096 : FE 0D               	CP	0DH
     639/    5098 : CA EC 50            	JP	Z,ENDL
     640/    509B : CD A6 50            LET:	CALL	LTSUB
     641/    509E : (MACRO)              	MTST	2CH,ENDL
     641/    509E : CD 6B 4D                    CALL    TEST
     641/    50A1 : 2C                          DB      2CH
     641/    50A2 : 49                          DB      ENDL-$-1
     642/    50A3 : C3 9B 50            	JP	LET
     643/    50A6 :                     ;
     644/    50A6 : CD A6 52            LTSUB:	CALL	TSTV
     645/    50A9 : DA 1B 53            	JP	C,ERWHT
     646/    50AC : E5                  	PUSH	HL
     647/    50AD : (MACRO)              	MTST	3DH,LERR
     647/    50AD : CD 6B 4D                    CALL    TEST
     647/    50B0 : 3D                          DB      3DH
     647/    50B1 : 3D                          DB      LERR-$-1
     648/    50B2 : CD 0E 51            	CALL	EEXPR
     649/    50B5 : 44                  	LD	B,H
     650/    50B6 : 4D                  	LD	C,L
     651/    50B7 : E1                  	POP	HL
     652/    50B8 : 71                  	LD	(HL),C
     653/    50B9 : 23                  	INC	HL
     654/    50BA : 70                  	LD	(HL),B
     655/    50BB : C9                  	RET
     656/    50BC :                     ;
     657/    50BC : CD 0E 51            GOTO:	CALL	EEXPR
     658/    50BF : D5                  	PUSH	DE
     659/    50C0 : CD 05 51            	CALL	TSCR2
     660/    50C3 : CD F4 4C            	CALL	SRCH
     661/    50C6 : C2 23 53            	JP	NZ,ERHW1
     662/    50C9 : F1                  	POP	AF
     663/    50CA : C3 DC 50            	JP	RUN2
     664/    50CD :                     ;
     665/    50CD : CD 05 51            RUN:	CALL	TSCR2
     666/    50D0 : 11 14 80            	LD	DE,OTOP
     667/    50D3 : 21 00 00            RUN1:	LD	HL,0000H
     668/    50D6 : CD FC 4C            	CALL	SRCH1
     669/    50D9 : DA 27 4C            	JP	C,START
     670/    50DC : EB                  RUN2:	EX	DE,HL
     671/    50DD : 22 02 80            	LD	(CLABL),HL
     672/    50E0 : EB                  	EX	DE,HL
     673/    50E1 : 13                  	INC	DE
     674/    50E2 : 13                  	INC	DE
     675/    50E3 : CD C1 53            NXTGO:	CALL	BREAK
     676/    50E6 : 21 9B 4D            	LD	HL,STMKW-1
     677/    50E9 : C3 3B 4D            	JP	NXTKW
     678/    50EC :                     ;
     679/    50EC : CD F2 50            ENDL:	CALL	TSTSC
     680/    50EF : C3 1B 53            LERR:	JP	ERWHT
     681/    50F2 :                     ;
     682/    50F2 : (MACRO)              TSTSC:	MTST	3BH,TSCR1
     682/    50F2 : CD 6B 4D                    CALL    TEST
     682/    50F5 : 3B                          DB      3BH
     682/    50F6 : 04                          DB      TSCR1-$-1
     683/    50F7 : F1                  	POP	AF
     684/    50F8 : C3 E3 50            	JP	NXTGO
     685/    50FB :                     ;
     686/    50FB : (MACRO)              TSCR1:	MTST	0DH,TSRTN
     686/    50FB : CD 6B 4D                    CALL    TEST
     686/    50FE : 0D                          DB      0DH
     686/    50FF : 04                          DB      TSRTN-$-1
     687/    5100 : F1                  	POP	AF
     688/    5101 : C3 D3 50            	JP	RUN1
     689/    5104 : C9                  TSRTN:	RET
     690/    5105 :                     ;
     691/    5105 : CD 7F 4D            TSCR2:	CALL	SKPBL
     692/    5108 : FE 0D               	CP	0DH
     693/    510A : C8                  	RET	Z
     694/    510B : C3 1B 53            	JP	ERWHT
     695/    510E :                     ;
     696/    510E : CD 6D 51            EEXPR:	CALL	EXPR
     697/    5111 : E5                  	PUSH	HL
     698/    5112 : 21 17 51            	LD	HL,ROPKW-1
     699/    5115 : C3 3B 4D            	JP	NXTKW
     700/    5118 : (MACRO)              ROPKW:	CASE_	">=", GE1
     700/    5118 : 3E 3D                       DB      ">="
     700/    511A : D1                          DB      (GE1 >> 8)+80H
     700/    511B : 2F                          DB      GE1 & 0FFH
     701/    511C : (MACRO)              	CASE_	"<>", NE1
     701/    511C : 3C 3E                       DB      "<>"
     701/    511E : D1                          DB      (NE1 >> 8)+80H
     701/    511F : 35                          DB      NE1 & 0FFH
     702/    5120 : (MACRO)              	CASE_	'>', GT1
     702/    5120 : 3E                          DB      '>'
     702/    5121 : D1                          DB      (GT1 >> 8)+80H
     702/    5122 : 3B                          DB      GT1 & 0FFH
     703/    5123 : (MACRO)              	CASE_	'=', EQ1
     703/    5123 : 3D                          DB      '='
     703/    5124 : D1                          DB      (EQ1 >> 8)+80H
     703/    5125 : 4A                          DB      EQ1 & 0FFH
     704/    5126 : (MACRO)              	CASE_	"<=", LE1
     704/    5126 : 3C 3D                       DB      "<="
     704/    5128 : D1                          DB      (LE1 >> 8)+80H
     704/    5129 : 42                          DB      LE1 & 0FFH
     705/    512A : (MACRO)              	CASE_	'<', LT1
     705/    512A : 3C                          DB      '<'
     705/    512B : D1                          DB      (LT1 >> 8)+80H
     705/    512C : 50                          DB      LT1 & 0FFH
     706/    512D : (MACRO)              	MENDC	NOROP
     706/    512D : D1                          DB      (NOROP + 8000H) >> 8
     706/    512E : 56                          DB      NOROP & 0FFH
     707/    512F :                     ;
     708/    512F : CD 58 51            GE1:	CALL	IFEXQ
     709/    5132 : D8                  	RET	C
     710/    5133 : 6F                  	LD	L,A
     711/    5134 : C9                  	RET
     712/    5135 :                     ;
     713/    5135 : CD 58 51            NE1:	CALL	IFEXQ
     714/    5138 : C8                  	RET	Z
     715/    5139 : 6F                  	LD	L,A
     716/    513A : C9                  	RET
     717/    513B :                     ;
     718/    513B : CD 58 51            GT1:	CALL	IFEXQ
     719/    513E : C8                  	RET	Z
     720/    513F : D8                  	RET	C
     721/    5140 : 6F                  	LD	L,A
     722/    5141 : C9                  	RET
     723/    5142 : CD 58 51            LE1:	CALL	IFEXQ
     724/    5145 : 6F                  	LD	L,A
     725/    5146 : C8                  	RET	Z
     726/    5147 : D8                  	RET	C
     727/    5148 : 6C                  	LD	L,H
     728/    5149 : C9                  	RET
     729/    514A : CD 58 51            EQ1:	CALL	IFEXQ
     730/    514D : C0                  	RET	NZ
     731/    514E : 6F                  	LD	L,A
     732/    514F : C9                  	RET
     733/    5150 : CD 58 51            LT1:	CALL	IFEXQ
     734/    5153 : D0                  	RET	NC
     735/    5154 : 6F                  	LD	L,A
     736/    5155 : C9                  	RET
     737/    5156 : E1                  NOROP:	POP	HL
     738/    5157 : C9                  	RET
     739/    5158 :                     ;
     740/    5158 : 79                  IFEXQ:	LD	A,C
     741/    5159 : E1                  	POP	HL
     742/    515A : C1                  	POP	BC
     743/    515B : E5                  	PUSH	HL
     744/    515C : C5                  	PUSH	BC
     745/    515D : 4F                  	LD	C,A
     746/    515E : CD 6D 51            	CALL	EXPR
     747/    5161 : EB                  	EX	DE,HL
     748/    5162 : E3                  	EX	(SP),HL
     749/    5163 : CD 35 52            	CALL	CMINT
     750/    5166 : D1                  	POP	DE
     751/    5167 : 21 00 00            	LD	HL,0000H
     752/    516A : 3E 01               	LD	A,01H
     753/    516C : C9                  	RET
     754/    516D :                     ;
     755/    516D : (MACRO)              EXPR:	MTST	2DH,EXPR1
     755/    516D : CD 6B 4D                    CALL    TEST
     755/    5170 : 2D                          DB      2DH
     755/    5171 : 06                          DB      EXPR1-$-1
     756/    5172 : 21 00 00            	LD	HL,0000H
     757/    5175 : C3 91 51            	JP	NEGA1
     758/    5178 : (MACRO)              EXPR1:	MTST	2BH,EXPR3
     758/    5178 : CD 6B 4D                    CALL    TEST
     758/    517B : 2B                          DB      2BH
     758/    517C : 00                          DB      EXPR3-$-1
     759/    517D : CD A9 51            EXPR3:	CALL	TERM
     760/    5180 : (MACRO)              EXPR2:	MTST	2BH,NEGA0
     760/    5180 : CD 6B 4D                    CALL    TEST
     760/    5183 : 2B                          DB      2BH
     760/    5184 : 07                          DB      NEGA0-$-1
     761/    5185 : E5                  	PUSH	HL
     762/    5186 : CD A9 51            	CALL	TERM
     763/    5189 : C3 98 51            	JP	ADDBL
     764/    518C : (MACRO)              NEGA0:	MTST	2DH,EXPRT
     764/    518C : CD 6B 4D                    CALL    TEST
     764/    518F : 2D                          DB      2DH
     764/    5190 : 8D                          DB      EXPRT-$-1
     765/    5191 : E5                  NEGA1:	PUSH	HL
     766/    5192 : CD A9 51            	CALL	TERM
     767/    5195 : CD 29 52            	CALL	TWSCP
     768/    5198 : EB                  ADDBL:	EX	DE,HL
     769/    5199 : E3                  	EX	(SP),HL
     770/    519A : 7C                  	LD	A,H
     771/    519B : AA                  	XOR	D
     772/    519C : 7A                  	LD	A,D
     773/    519D : 19                  	ADD	HL,DE
     774/    519E : D1                  	POP	DE
     775/    519F : FA 80 51            	JP	M,EXPR2
     776/    51A2 : AC                  	XOR	H
     777/    51A3 : F2 80 51            	JP	P,EXPR2
     778/    51A6 : C3 22 53            	JP	ERHOW
     779/    51A9 :                     ;
     780/    51A9 : CD 41 52            TERM:	CALL	FACTR
     781/    51AC : (MACRO)              MULT:	MTST	2AH,DIV
     781/    51AC : CD 6B 4D                    CALL    TEST
     781/    51AF : 2A                          DB      2AH
     781/    51B0 : 2B                          DB      DIV-$-1
     782/    51B1 : E5                  	PUSH	HL
     783/    51B2 : CD 41 52            	CALL	FACTR
     784/    51B5 : 06 00               	LD	B,00H
     785/    51B7 : CD 26 52            	CALL	ABS
     786/    51BA : EB                  	EX	DE,HL
     787/    51BB : E3                  	EX	(SP),HL
     788/    51BC : CD 26 52            	CALL	ABS
     789/    51BF : 7C                  	LD	A,H
     790/    51C0 : B7                  	OR	A
     791/    51C1 : CA CA 51            	JP	Z,MULT1
     792/    51C4 : 7A                  	LD	A,D
     793/    51C5 : B2                  	OR	D
     794/    51C6 : EB                  	EX	DE,HL
     795/    51C7 : C2 23 53            	JP	NZ,ERHW1
     796/    51CA : 7D                  MULT1:	LD	A,L
     797/    51CB : 2E 00               	LD	L,0
     798/    51CD : B7                  	OR	A
     799/    51CE : CA FB 51            	JP	Z,TERM1
     800/    51D1 : 19                  MULTL:	ADD	HL,DE
     801/    51D2 : DA 23 53            	JP	C,ERHW1
     802/    51D5 : 3D                  	DEC	A
     803/    51D6 : C2 D1 51            	JP	NZ,MULTL
     804/    51D9 : C3 FB 51            	JP	TERM1
     805/    51DC : (MACRO)              DIV:	MTST	2FH,EXPRT
     805/    51DC : CD 6B 4D                    CALL    TEST
     805/    51DF : 2F                          DB      2FH
     805/    51E0 : 3D                          DB      EXPRT-$-1
     806/    51E1 : E5                  	PUSH	HL
     807/    51E2 : CD 41 52            	CALL	FACTR
     808/    51E5 : 06 00               	LD	B,00H
     809/    51E7 : CD 26 52            	CALL	ABS
     810/    51EA : EB                  	EX	DE,HL
     811/    51EB : E3                  	EX	(SP),HL
     812/    51EC : CD 26 52            	CALL	ABS
     813/    51EF : 7A                  	LD	A,D
     814/    51F0 : B3                  	OR	E
     815/    51F1 : CA 23 53            	JP	Z,ERHW1
     816/    51F4 : C5                  	PUSH	BC
     817/    51F5 : CD 09 52            	CALL	DIVID
     818/    51F8 : 60                  	LD	H,B
     819/    51F9 : 69                  	LD	L,C
     820/    51FA : C1                  	POP	BC
     821/    51FB : D1                  TERM1:	POP	DE
     822/    51FC : 7C                  	LD	A,H
     823/    51FD : B7                  	OR	A
     824/    51FE : FA 22 53            	JP	M,ERHOW
     825/    5201 : 78                  	LD	A,B
     826/    5202 : B7                  	OR	A
     827/    5203 : FC 29 52            	CALL	M,TWSCP
     828/    5206 : C3 AC 51            	JP	MULT
     829/    5209 :                     ;
     830/    5209 : E5                  DIVID:	PUSH	HL
     831/    520A : 6C                  	LD	L,H
     832/    520B : 26 00               	LD	H,00H
     833/    520D : CD 14 52            	CALL	DIVSB
     834/    5210 : 41                  	LD	B,C
     835/    5211 : 7D                  	LD	A,L
     836/    5212 : E1                  	POP	HL
     837/    5213 : 67                  	LD	H,A
     838/    5214 : 0E FF               DIVSB:	LD	C,0FFH
     839/    5216 : 0C                  DIVS1:	INC	C
     840/    5217 : CD 1F 52            	CALL	DIFF
     841/    521A : D2 16 52            	JP	NC,DIVS1
     842/    521D : 19                  	ADD	HL,DE
     843/    521E : C9                  EXPRT:	RET
     844/    521F :                     ;
     845/    521F : 7D                  DIFF:	LD	A,L
     846/    5220 : 93                  	SUB	E
     847/    5221 : 6F                  	LD	L,A
     848/    5222 : 7C                  	LD	A,H
     849/    5223 : 9A                  	SBC	A,D
     850/    5224 : 67                  	LD	H,A
     851/    5225 : C9                  	RET
     852/    5226 :                     ;
     853/    5226 : 7C                  ABS:	LD	A,H
     854/    5227 : B7                  	OR	A
     855/    5228 : F0                  	RET	P
     856/    5229 : 7C                  TWSCP:	LD	A,H
     857/    522A : 2F                  	CPL
     858/    522B : 67                  	LD	H,A
     859/    522C : 7D                  	LD	A,L
     860/    522D : 2F                  	CPL
     861/    522E : 6F                  	LD	L,A
     862/    522F : 23                  	INC	HL
     863/    5230 : 78                  	LD	A,B
     864/    5231 : EE 80               	XOR	80H
     865/    5233 : 47                  	LD	B,A
     866/    5234 : C9                  	RET
     867/    5235 :                     ;
     868/    5235 : 7C                  CMINT:	LD	A,H
     869/    5236 : AA                  	XOR	D
     870/    5237 : F2 3B 52            	JP	P,COMPR
     871/    523A : EB                  	EX	DE,HL
     872/    523B : 7C                  COMPR:	LD	A,H
     873/    523C : BA                  	CP	D
     874/    523D : C0                  	RET	NZ
     875/    523E : 7D                  	LD	A,L
     876/    523F : BB                  	CP	E
     877/    5240 : C9                  	RET
     878/    5241 :                     ;
     879/    5241 : 21 46 52            FACTR:	LD	HL,FNKW-1
     880/    5244 : C3 3B 4D            	JP	NXTKW
     881/    5247 : (MACRO)              FNKW:	CASE_	"RND", RND
     881/    5247 : 52 4E 44                    DB      "RND"
     881/    524A : D2                          DB      (RND >> 8)+80H
     881/    524B : 59                          DB      RND & 0FFH
     882/    524C : (MACRO)              	CASE_	"ABS", FNABS
     882/    524C : 41 42 53                    DB      "ABS"
     882/    524F : D2                          DB      (FNABS >> 8)+80H
     882/    5250 : 82                          DB      FNABS & 0FFH
     883/    5251 : (MACRO)              	CASE_	"SIZE", RSIZE
     883/    5251 : 53 49 5A 45                 DB      "SIZE"
     883/    5255 : D2                          DB      (RSIZE >> 8)+80H
     883/    5256 : 8E                          DB      RSIZE & 0FFH
     884/    5257 : (MACRO)              	MENDC	VAR
     884/    5257 : D2                          DB      (VAR + 8000H) >> 8
     884/    5258 : 9B                          DB      VAR & 0FFH
     885/    5259 :                     ;
     886/    5259 : CD 0D 53            RND:	CALL	EXPR0
     887/    525C : 7C                  	LD	A,H
     888/    525D : B7                  	OR	A
     889/    525E : FA 22 53            	JP	M,ERHOW
     890/    5261 : B5                  	OR	L
     891/    5262 : CA 22 53            	JP	Z,ERHOW
     892/    5265 : D5                  	PUSH	DE
     893/    5266 : E5                  	PUSH	HL
     894/    5267 : 2A 12 80            	LD	HL,(RWRK)
     895/    526A :                     ;;	INC	HL
     896/    526A : 7C                  	LD	A,H
     897/    526B : E6 07               	AND	07H
     898/    526D : 67                  	LD	H,A
     899/    526E :                     ;;	DEC	L
     900/    526E : 11 00 4C            	LD	DE,ITOP	;
     901/    5271 : 19                  	ADD	HL,DE	;
     902/    5272 : 5E                  RND1:	LD	E,(HL)
     903/    5273 : 23                  	INC	HL
     904/    5274 : 56                  	LD	D,(HL)
     905/    5275 : 22 12 80            	LD	(RWRK),HL
     906/    5278 : E1                  	POP	HL
     907/    5279 : EB                  	EX	DE,HL
     908/    527A : C5                  	PUSH	BC
     909/    527B : CD 09 52            	CALL	DIVID
     910/    527E : C1                  	POP	BC
     911/    527F : D1                  	POP	DE
     912/    5280 : 23                  	INC	HL
     913/    5281 : C9                  	RET
     914/    5282 :                     ;
     915/    5282 : CD 0D 53            FNABS:	CALL	EXPR0
     916/    5285 : CD 26 52            	CALL	ABS
     917/    5288 : 7C                  	LD	A,H
     918/    5289 : B4                  	OR	H
     919/    528A : FA 22 53            	JP	M,ERHOW
     920/    528D : C9                  	RET
     921/    528E :                     ;
     922/    528E : 2A 00 80            RSIZE:	LD	HL,(OBTM)
     923/    5291 : D5                  	PUSH	DE
     924/    5292 : EB                  	EX	DE,HL
     925/    5293 : 21 00 BD            	LD	HL,VALTOP
     926/    5296 : CD 1F 52            	CALL	DIFF
     927/    5299 : D1                  	POP	DE
     928/    529A : C9                  	RET
     929/    529B :                     ;
     930/    529B : CD A6 52            VAR:	CALL	TSTV
     931/    529E : DA 07 53            	JP	C,NUMB
     932/    52A1 : 7E                  	LD	A,(HL)
     933/    52A2 : 23                  	INC	HL
     934/    52A3 : 66                  	LD	H,(HL)
     935/    52A4 : 6F                  	LD	L,A
     936/    52A5 : C9                  	RET
     937/    52A6 :                     ;
     938/    52A6 : CD 7F 4D            TSTV:	CALL	SKPBL
     939/    52A9 : D6 40               	SUB	'@'
     940/    52AB : D8                  	RET	C
     941/    52AC : C2 CA 52            	JP	NZ,TSTV1
     942/    52AF : 13                  	INC	DE
     943/    52B0 : CD 0D 53            	CALL	EXPR0
     944/    52B3 : 29                  	ADD	HL,HL
     945/    52B4 : DA 22 53            	JP	C,ERHOW
     946/    52B7 : D5                  	PUSH	DE
     947/    52B8 : EB                  	EX	DE,HL
     948/    52B9 : CD 8E 52            	CALL	RSIZE
     949/    52BC : CD 3B 52            	CALL	COMPR
     950/    52BF : DA 2A 53            	JP	C,ERSY1
     951/    52C2 : 21 00 BD            	LD	HL,VALTOP
     952/    52C5 : CD 1F 52            	CALL	DIFF
     953/    52C8 : D1                  	POP	DE
     954/    52C9 : C9                  	RET
     955/    52CA : FE 1B               TSTV1:	CP	'Z'+1-'@'
     956/    52CC : 3F                  	CCF
     957/    52CD : D8                  	RET	C
     958/    52CE : 13                  	INC	DE
     959/    52CF : 21 00 BD            	LD	HL,VALTOP
     960/    52D2 : 07                  	RLCA
     961/    52D3 : 85                  	ADD	A,L
     962/    52D4 : 6F                  	LD	L,A
     963/    52D5 : 3E 00               	LD	A,00H
     964/    52D7 : 8C                  	ADC	A,H
     965/    52D8 : 67                  	LD	H,A
     966/    52D9 : C9                  	RET
     967/    52DA :                     ;
     968/    52DA : 21 00 00            GINT:	LD	HL,0000H
     969/    52DD : 44                  	LD	B,H
     970/    52DE : CD 7F 4D            	CALL	SKPBL
     971/    52E1 : FE 30               GETI1:	CP	'0'
     972/    52E3 : D8                  	RET	C
     973/    52E4 : FE 3A               	CP	'9'+1
     974/    52E6 : D0                  	RET	NC
     975/    52E7 : 3E F0               	LD	A,0F0H
     976/    52E9 : A4                  	AND	H
     977/    52EA : C2 22 53            	JP	NZ,ERHOW
     978/    52ED : 04                  	INC	B
     979/    52EE : C5                  	PUSH	BC
     980/    52EF : 44                  	LD	B,H
     981/    52F0 : 4D                  	LD	C,L
     982/    52F1 : 29                  	ADD	HL,HL
     983/    52F2 : 29                  	ADD	HL,HL
     984/    52F3 : 09                  	ADD	HL,BC
     985/    52F4 : 29                  	ADD	HL,HL
     986/    52F5 : 1A                  	LD	A,(DE)
     987/    52F6 : 13                  	INC	DE
     988/    52F7 : E6 0F               	AND	0FH
     989/    52F9 : 85                  	ADD	A,L
     990/    52FA : 6F                  	LD	L,A
     991/    52FB : 3E 00               	LD	A,00H
     992/    52FD : 8C                  	ADC	A,H
     993/    52FE : 67                  	LD	H,A
     994/    52FF : C1                  	POP	BC
     995/    5300 : 1A                  	LD	A,(DE)
     996/    5301 : FA 22 53            	JP	M,ERHOW
     997/    5304 : C3 E1 52            	JP	GETI1
     998/    5307 :                     ;
     999/    5307 : CD DA 52            NUMB:	CALL	GINT
    1000/    530A : 78                  	LD	A,B
    1001/    530B : B7                  	OR	A
    1002/    530C : C0                  	RET	NZ
    1003/    530D :                     ;
    1004/    530D : (MACRO)              EXPR0:	MTST	28H,ERWHT
    1004/    530D : CD 6B 4D                    CALL    TEST
    1004/    5310 : 28                          DB      28H
    1004/    5311 : 09                          DB      ERWHT-$-1
    1005/    5312 : CD 0E 51            	CALL	EEXPR
    1006/    5315 : (MACRO)              	MTST	29H,ERWHT
    1006/    5315 : CD 6B 4D                    CALL    TEST
    1006/    5318 : 29                          DB      29H
    1006/    5319 : 01                          DB      ERWHT-$-1
    1007/    531A : C9                  	RET
    1008/    531B :                     ;
    1009/    531B : D5                  ERWHT:	PUSH	DE
    1010/    531C : 11 60 53            ERWT1:	LD	DE,WHTMS
    1011/    531F : C3 2D 53            	JP	LERMS
    1012/    5322 : D5                  ERHOW:	PUSH	DE
    1013/    5323 : 11 5B 53            ERHW1:	LD	DE,HOWMS
    1014/    5326 : C3 2D 53            	JP	LERMS
    1015/    5329 : D5                  ERSRY:	PUSH	DE
    1016/    532A : 11 66 53            ERSY1:	LD	DE,SRYMS
    1017/    532D : 97                  LERMS:	SUB	A
    1018/    532E : CD A5 53            	CALL	MSG
    1019/    5331 : D1                  	POP	DE
    1020/    5332 : 1A                  	LD	A,(DE)
    1021/    5333 : F5                  	PUSH	AF
    1022/    5334 : 97                  	SUB	A
    1023/    5335 : 12                  	LD	(DE),A
    1024/    5336 : 2A 02 80            	LD	HL,(CLABL)
    1025/    5339 : E5                  	PUSH	HL
    1026/    533A : 7E                  	LD	A,(HL)
    1027/    533B : 23                  	INC	HL
    1028/    533C : B6                  	OR	(HL)
    1029/    533D : D1                  	POP	DE
    1030/    533E : CA 27 4C            	JP	Z,START
    1031/    5341 : 7E                  	LD	A,(HL)
    1032/    5342 : B7                  	OR	A
    1033/    5343 : FA 35 50            	JP	M,ERRIN
    1034/    5346 : CD 68 4F            	CALL	WLINE
    1035/    5349 : 1B                  	DEC	DE
    1036/    534A : F1                  	POP	AF
    1037/    534B : 12                  	LD	(DE),A
    1038/    534C : 3E 3F               	LD	A,'?'
    1039/    534E : CD B5 53            	CALL	PUT
    1040/    5351 : 97                  	SUB	A
    1041/    5352 : CD A5 53            	CALL	MSG
    1042/    5355 : C3 27 4C            	JP	START
    1043/    5358 :                     ;
    1044/    5358 : 4F 4B               OKMES:	DB	'OK'
    1045/    535A : 0D                  	DB	0DH
    1046/    535B : 48 4F 57 3F         HOWMS:	DB	'HOW?'
    1047/    535F : 0D                  	DB	0DH
    1048/    5360 : 57 48 41 54 3F      WHTMS:	DB	'WHAT?'
    1049/    5365 : 0D                  	DB	0DH
    1050/    5366 : 53 4F 52 52 59      SRYMS:	DB	'SORRY'
    1051/    536B : 0D                  	DB	0DH
    1052/    536C :                     ;
    1053/    536C : 50 41 4C 4F 20 41   OPNMS1:	DB	'PALO ALTO '
             5372 : 4C 54 4F 20       
    1054/    5376 : 54 49 4E 59 20 42   	DB	'TINY BASIC'
             537C : 41 53 49 43       
    1055/    5380 : 0D                  	DB	0DH
    1056/    5381 : 50 4F 52 54 41 42   OPNMS2:	DB	'PORTABLE '
             5387 : 4C 45 20          
    1057/    538A : 5A 38 30 20 56 45   	DB	'Z80 VERSION'
             5390 : 52 53 49 4F 4E    
    1058/    5395 : 0D                  	DB	0DH
    1059/    5396 : 53 42 43 5A 38 30   OPNMS3:	DB	'SBCZ80 EDITION'
             539C : 20 45 44 49 54 49 
             53A2 : 4F 4E             
    1060/    53A4 : 0D                  	DB	0DH
    1061/    53A5 :                     ;
    1062/    53A5 : 47                  MSG:	LD	B,A
    1063/    53A6 : 1A                  MSG1:	LD	A,(DE)
    1064/    53A7 : 13                  	INC	DE
    1065/    53A8 : B8                  	CP	B
    1066/    53A9 : C8                  	RET	Z
    1067/    53AA : CD B5 53            	CALL	PUT
    1068/    53AD : FE 0D               	CP	0DH
    1069/    53AF : C2 A6 53            	JP	NZ,MSG1
    1070/    53B2 : C9                  	RET
    1071/    53B3 :                     ;
    1072/    53B3 : 3E 0D               CRLF:	LD	A,0DH
    1073/    53B5 : CF                  PUT:	RST	08H
    1074/    53B6 :                     ;
    1075/    53B6 : FE 0D               	CP	0DH
    1076/    53B8 : C0                  	RET	NZ
    1077/    53B9 : 3E 0A               	LD	A,0AH
    1078/    53BB : CD B5 53            	CALL	PUT
    1079/    53BE : 3E 0D               	LD	A,0DH
    1080/    53C0 : C9                  	RET
    1081/    53C1 :                     ;
    1082/    53C1 : =53C1H               BREAK	EQU	$
    1083/    53C1 : DF                  GET:	RST	18H
    1084/    53C2 : C8                  	RET	Z
    1085/    53C3 : D7                  	RST	10H
    1086/    53C4 : FE 1B               	CP	ESC
    1087/    53C6 : C0                  	ret	nz
    1088/    53C7 :                     
    1089/    53C7 :                     ;	JP	NZ,GET1
    1090/    53C7 :                     
    1091/    53C7 :                     ;	INC	SP
    1092/    53C7 :                     ;	INC	SP
    1093/    53C7 : C3 27 4C            	JP	START
    1094/    53CA :                     ;
    1095/    53CA : FE 61               GET1:	CP	'a'
    1096/    53CC : D8                  	RET	C
    1097/    53CD : FE 7B               	CP	'z'+1
    1098/    53CF : D0                  	RET	NC
    1099/    53D0 : E6 DF               	AND	11011111B
    1100/    53D2 : C9                  	RET
    1101/    53D3 :                     ;
    1102/    53D3 : FF FF FF FF FF FF   	db	($ & 0FF00H)+100H-$ dup(0FFH)
             53D9 : FF FF FF FF FF FF 
             53DF : FF FF FF FF FF FF 
             53E5 : FF FF FF FF FF FF 
             53EB : FF FF FF FF FF FF 
             53F1 : FF FF FF FF FF FF 
             53F7 : FF FF FF FF FF FF 
             53FD : FF FF FF          
    1103/    5400 :                     
    1104/    5400 :                     
    1105/    5400 :                     
    1106/    8000 :                     	ORG	RAMTOP
    1107/    8000 :                     ;
    1108/    8000 :                     OBTM:	DS	0002H
    1109/    8002 :                     CLABL:	DS	0002H
    1110/    8004 :                     RSTCK:	DS	0002H
    1111/    8006 :                     NCNTR:	DS	0002H
    1112/    8008 :                     FCNTR:	DS	0002H
    1113/    800A :                     FSTPV:	DS	0002H
    1114/    800C :                     FTOV:	DS	0002H
    1115/    800E :                     FLABL:	DS	0002H
    1116/    8010 :                     FOBJ:	DS	0002H
    1117/    8012 :                     RWRK:	DS	0002H
    1118/    8014 : =8014H               OTOP	EQU	$
    1119/    8014 :                     ;
    1120/    8014 :                     	END
 AS V1.42 Beta [Bld 227] - Source File EMUZ80_ZTB.ASM - Page 2 - 11/29/2022 11:12:20


  Symbol Table (* = unused):
  --------------------------

 ABS :                         5226 C |  ADDBL :                       5198 C |
*ARCHITECTURE :                                        "i386-unknown-win32" - |
 BREAK :                       53C1 - |  BS :                             8 - |
 BYE :                         4DE0 C | *CASESENSITIVE :                  0 - |
 CCAN :                        4CEC C |  CLABL :                       8002 C |
 CMDKW :                       4D87 C |  CMINT :                       5235 C |
*COMPMODE :                       0 - |  COMPR :                       523B C |
*CONSTPI :        3.141592653589793 - |  CRLF :                        53B3 C |
 CRUB :                        4CD3 C | *DATE :                "11/29/2022" - |
 DIFF :                        521F C |  DIV :                         51DC C |
 DIVID :                       5209 C |  DIVS1 :                       5216 C |
 DIVSB :                       5214 C |  EDITR :                       4C43 C |
 EEXPR :                       510E C |  ENDL :                        50EC C |
 ENTRY :                       4C06 C |  EQ1 :                         514A C |
 ERHOW :                       5322 C |  ERHW1 :                       5323 C |
 ERRIN :                       5035 C |  ERSRY :                       5329 C |
 ERSY1 :                       532A C |  ERWHT :                       531B C |
 ERWT1 :                       531C C |  ESC :                           1B - |
 EXEQT :                       4D63 C |  EXPR :                        516D C |
 EXPR0 :                       530D C |  EXPR1 :                       5178 C |
 EXPR2 :                       5180 C |  EXPR3 :                       517D C |
 EXPRT :                       521E C |  FACTR :                       5241 C |
*FALSE :                          0 - |  FCNTR :                       8008 C |
 FLABL :                       800E C |  FNABS :                       5282 C |
 FNKW :                        5247 C |  FOBJ :                        8010 C |
 FOR :                         4E2F C |  FOR0 :                        4E62 C |
 FOR10 :                       4E9B C |  FOR3 :                        4E7A C |
*FOR5 :                        4E8C C |  FORTO :                       4E45 C |
 FSTEP :                       4E59 C |  FSTP1 :                       4E5F C |
 FSTPV :                       800A C |  FTOV :                        800C C |
*FULLPMMU :                       1 - |  GE1 :                         512F C |
 GET :                         53C1 C |  GET1 :                        53CA C |
 GETI1 :                       52E1 C |  GETL :                        4CA3 C |
 GETL1 :                       4CA9 C |  GINT :                        52DA C |
 GOSUB :                       4DF2 C |  GOTO :                        50BC C |
 GT1 :                         513B C | *HAS64 :                          0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
 HOWMS :                       535B C |  IFEXQ :                       5158 C |
 IFSTM :                       4F3C C | *INPT1 :                       5046 C |
 INPT2 :                       504F C |  INPT4 :                       5061 C |
 INPT6 :                       508A C |  INPUT :                       503F C |
*INSRT :                       4C58 C | *INSUPMODE :                      0 - |
 ITOP :                        4C00 - |  KWC1 :                        4D3F C |
 KWCPR :                       4D38 C |  KWSK1 :                       4D52 C |
 KWSK2 :                       4D5E C |  KWSRT :                       4D5C C |
 KWSTP :                       4E51 C |  KWTO :                        4E3F C |
 LBFSZ :                         50 - |  LBUF :                       0BD37 - |
 LBUFL :                         37 - |  LE1 :                         5142 C |
 LERMS :                       532D C |  LERR :                        50EF C |
 LET :                         509B C |  LETDF :                       5093 C |
 LIST :                        4F50 C |  LISTL :                       4F59 C |
*LISTON :                         1 - |  LT1 :                         5150 C |
 LTSUB :                       50A6 C | *MACEXP :                         7 - |
*MOMCPU :                        80 - | *MOMCPUNAME :                 "Z80" - |
 MOVE :                        4C7A C |  MSG :                         53A5 C |
 MSG1 :                        53A6 C |  MSTK :                       0BD87 - |
 MULT :                        51AC C |  MULT1 :                       51CA C |
 MULTL :                       51D1 C |  NCNTR :                       8006 C |
 NE1 :                         5135 C |  NEGA0 :                       518C C |
 NEGA1 :                       5191 C | *NESTMAX :                      100 - |
 NEW :                         4DE3 C |  NEXT :                        4EA2 C |
 NEXT1 :                       4EAB C |  NEXT2 :                       4EC5 C |
 NEXT4 :                       4EDD C |  NEXT5 :                       4EF1 C |
 NOROP :                       5156 C |  NPOP :                        4F3A C |
 NPSH :                        4F1D C |  NUMB :                        5307 C |
 NXTGO :                       50E3 C |  NXTK1 :                       4D3E C |
 NXTKW :                       4D3B C |  OBTM :                        8000 C |
 OKMES :                       5358 C |  OPNMS1 :                      536C C |
 OPNMS2 :                      5381 C |  OPNMS3 :                      5396 C |
 OTOP :                        8014 - | *PADDING :                        1 - |
 POPV :                        4F20 C |  PR11 :                        4FD4 C |
 PR12 :                        4FEE C |  PR13 :                        4FCD C |
 PR14 :                        4FE0 C |  PR15 :                        4FF2 C |
 PRCMA :                       4FA7 C |  PRCR :                        4F8A C |
 PREND :                       4FB2 C |  PREXP :                       4FB8 C |
 PRINT :                       4F7D C |  PRLTR :                       4FA1 C |
 PROMPT :                       '>' - | *PRSC :                        4F7F C |
 PRSHA :                       4F95 C |  PRSUB :                       4FC3 C |
 PSHV :                        4EF7 C |  PUT :                         53B5 C |
 RAMSIZ :                      4000 - |  RAMTOP :                      8000 - |
*RELAXED :                        0 - |  REM :                         4F44 C |
 RETRN :                       4E14 C |  RND :                         5259 C |
*RND1 :                        5272 C |  ROPKW :                       5118 C |
 RSIZE :                       528E C |  RSTCK :                       8004 C |
*RUBOUT :                        7F - |  RUN :                         50CD C |
 RUN1 :                        50D3 C |  RUN2 :                        50DC C |
 RWRK :                        8012 C |  SKIPL :                       4D12 C |
 SKPBL :                       4D7F C |  SKPL1 :                       4D13 C |
 SKPL2 :                       4D14 C |  SRCH :                        4CF4 C |
 SRCH1 :                       4CFC C |  SRYMS :                       5366 C |
 START :                       4C27 C |  STMKW :                       4D9C C |
 STOP :                        4DEC C |  TERM :                        51A9 C |
 TERM1 :                       51FB C |  TEST :                        4D6B C |
*TIME :                  "11:12:20" - |  TMSTK :                      0BDA5 - |
 TR2 :                         4D29 C |  TR2E :                        4D31 C |
 TRNSF :                       4D1E C | *TRUE :                           1 - |
 TSCR1 :                       50FB C |  TSCR2 :                       5105 C |
 TSRTN :                       5104 C |  TSTACK :                     0BEC0 - |
 TSTEQ :                       4D7B C |  TSTSC :                       50F2 C |
 TSTV :                        52A6 C |  TSTV1 :                       52CA C |
 TWSCP :                       5229 C |  VALTOP :                     0BD00 - |
 VAR :                         529B C | *VERSION :                     142F - |
 WHTMS :                       5360 C |  WINT :                        4FF3 C |
 WINT1 :                       5003 C |  WINT2 :                       5004 C |
 WINT3 :                       5014 C |  WINT4 :                       5015 C |
 WINT5 :                       5023 C |  WINT6 :                       5028 C |
 WLINE :                       4F68 C |  ZTBTOP :                      4C00 - |

    213 symbols
     27 unused symbols

 AS V1.42 Beta [Bld 227] - Source File EMUZ80_ZTB.ASM - Page 3 - 11/29/2022 11:12:20


  Defined Macros:
  ---------------

CASE_                                 | MENDC                                
MTST                                  |

      3 macros

 AS V1.42 Beta [Bld 227] - Source File EMUZ80_ZTB.ASM - Page 4 - 11/29/2022 11:12:20


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.05 seconds assembly time

   1121 lines source file
   1269 lines incl. macro expansions
      2 passes
      0 errors
      0 warnings
